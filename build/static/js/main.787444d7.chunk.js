(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},22:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(10),i=n.n(u),s=(n(22),n(15)),l=n(11),o=n(12),c=n(14),m=n(13),d=n(16),f=function(e){var t=e.newName,n=e.newNumber,a=e.addName,u=e.handleNameChange,i=e.handleNumberChange;return r.a.createElement("form",{onSubmit:a},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:t,onChange:u})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:n,onChange:i})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},h=function(e){var t=e.props,n=e.deleteName;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return n(t.id)}},"poista")))},p=function(e){var t=e.filter,n=e.handleFilterChange;return r.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4 ",r.a.createElement("input",{value:t,onChange:n}))},N=n(2),g=n.n(N),b="/api/persons",v={getAll:function(){return g.a.get(b).then(function(e){return e.data})},create:function(e){return g.a.post(b,e).then(function(e){return e.data})},deleteID:function(e){if(window.confirm("poistetaanko ".concat(e.name)))return g.a.delete("".concat(b,"/").concat(e.id)).then(function(e){return e.data})},update:function(e,t){if(window.confirm("muokataanko ".concat(t.name)))return g.a.put("".concat(b,"/").concat(e),t).then(function(e){return e.data})}},w=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"message"},t)},E=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).addName=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newNumber,id:n.state.persons.length+1};if(n.state.persons.map(function(e){return e.name}).includes(t.name)){var a={name:n.state.newName,number:n.state.newNumber,id:n.state.persons.find(function(e){return e.name===n.state.newName}).id};n.updateNumber(a)}else{var r=n.state.persons.concat(t);v.create(t).then(function(e){n.setState({persons:r,newName:"",newNumber:"",message:"lis\xe4ttiin ".concat(t.name)}),setTimeout(function(){n.setState({message:null})},2e3)}).catch(function(e){alert("henkil\xf6n '".concat(t.name,"' lis\xe4\xe4minen ei onnistunut"))})}},n.deleteName=function(e){var t=n.state.persons.find(function(t){return t.id===e});v.deleteID(t).then(function(a){n.setState({persons:n.state.persons.filter(function(t){return t.id!==e}),newName:"",newNumber:"",message:"poistettiin ".concat(t.name)}),setTimeout(function(){n.setState({message:null})},2e3)}).catch(function(a){alert("henkil\xf6 '".concat(t.name,"' on jo valitettavasti poistettu palvelimelta")),n.setState({persons:n.state.persons.filter(function(t){return t.id!==e})})})},n.updateNumber=function(e){var t=n.state.persons.find(function(t){return t.id===e.id}),a=Object(s.a)({},t,{number:e.number});v.update(e.id,a).then(function(t){var a=n.state.persons.filter(function(t){return t.id!==e.id});n.setState({persons:a.concat(t),message:"muokattiin numeroa henkil\xf6lt\xe4 ".concat(t.name)}),setTimeout(function(){n.setState({message:null})},2e3)}).catch(function(t){v.create(a).then(function(t){n.setState({persons:n.state.persons.filter(function(t){return t.id!==e.id}).concat(a),newName:"",newNumber:"",message:"lis\xe4ttiin ".concat(a.name)}),setTimeout(function(){n.setState({message:null})},2e3)})})},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){n.setState({filter:e.target.value})},n.state={persons:[],newName:"",newNumber:"",filter:"",message:null},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.getAll().then(function(t){e.setState({persons:t})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(w,{message:this.state.message}),r.a.createElement(p,{filter:this.state.filter,handleFilterChange:this.handleFilterChange}),r.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),r.a.createElement(f,{newName:this.state.newName,newNumber:this.state.newNumber,addName:this.addName,handleNameChange:this.handleNameChange,handleNumberChange:this.handleNumberChange}),r.a.createElement("h2",null,"Numerot"),r.a.createElement("table",null,r.a.createElement("tbody",null,this.state.persons.filter(function(t){return t.name.toLowerCase().includes(e.state.filter.toLowerCase())}).map(function(t){return r.a.createElement(h,{key:t.id,props:t,deleteName:e.deleteName})}))))}}]),t}(r.a.Component);i.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.787444d7.chunk.js.map